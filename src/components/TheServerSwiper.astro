---
const servers = [
  {
    name: "melon.ooo",
    members: "325.000+",
    image: {
      src: "/popular-servers/melon-discord-logo.webp",
      alt: "melon.ooo Discord Logo",
    },
  },
  {
    name: "COMBO",
    members: "240.000+",
    image: {
      src: "/popular-servers/combo-discord-logo.webp",
      alt: "COMBO Discord Logo",
    },
  },
  {
    name: "Adopt Me World",
    members: "200.000+",
    image: {
      src: "/popular-servers/adopt-me-world-discord-logo.webp",
      alt: "Adopt Me World Discord Logo",
    },
  },
  {
    name: "Howl",
    members: "165.000+",
    image: {
      src: "/popular-servers/howl-discord-logo.webp",
      alt: "Howl Discord Logo",
    },
  },
  {
    name: "Bitget Global",
    members: "145.000+",
    image: {
      src: "/popular-servers/bitget-global-discord-logo.webp",
      alt: "Bitget Global Discord Logo",
    },
  },
  {
    name: "PLEXUS",
    members: "130.000+",
    image: {
      src: "/popular-servers/plexus-discord-logo.webp",
      alt: "Plexus Discord Logo",
    },
  },
  {
    name: "A3: STILL ALIVE OFFICIAL",
    members: "115.000+",
    image: {
      src: "/popular-servers/a3-still-alive-discord-logo.webp",
      alt: "A3: STILL ALIVE Discord Logo",
    },
  },
  {
    name: "TAP FANTASY",
    members: "110.000+",
    image: {
      src: "/popular-servers/tap-fantasy-discord-logo.webp",
      alt: "TAP FANTASY Discord Logo",
    },
  },
  {
    name: "The Saudis",
    members: "90.000+",
    image: {
      src: "/popular-servers/the-saudis-discord-logo.webp",
      alt: "The Saudis Discord Logo",
    },
  },
  {
    name: "HELIO(HAY)",
    members: "60.000+",
    image: {
      src: "/popular-servers/helio-discord-logo.webp",
      alt: "HELIO(HAY) Discord Logo",
    },
  },
];
---

<script>
  import Swiper from "swiper";
  import "swiper/css";
  import { Autoplay } from "swiper/modules";
  import "swiper/css/navigation";
  import type { SwiperOptions } from "swiper/types";

  Swiper.use([Autoplay]);

  // Function to update Swiper's slidesPerView based on screen width
  function updateSwiperSlidesPerView() {
    const newSlidesPerView =
      window.innerWidth >= 1280
        ? 4.5
        : window.innerWidth >= 800
        ? 3.2
        : window.innerWidth >= 640
        ? 2.2
        : 1.2;
    swiper.params.slidesPerView = newSlidesPerView;
    swiper.update();
  }

  const swiperParams: SwiperOptions = {
    observer: true,
    observeParents: true,
    parallax: true,
    slidesPerView:
      window.innerWidth >= 1280
        ? 4.5
        : window.innerWidth >= 800
        ? 3.2
        : window.innerWidth >= 640
        ? 2.2
        : 1.2,
    spaceBetween: 30,
    rewind: true,
    autoplay: {
      delay: 2000,
      disableOnInteraction: false,
    },
  };

  let swiper = new Swiper(".mySwiper", swiperParams);

  // Add a resize event listener to update the slidesPerView when the screen size changes
  window.addEventListener("resize", updateSwiperSlidesPerView);
</script>

<div class="flex items-center swiper mySwiper">
  <div class="swiper-wrapper">
    {
      servers.map((server) => (
        <div class="swiper-slide">
          <div class="border-2 border-primary p-4 flex items-center gap-4 rounded-xl">
            <img
              src={server.image.src}
              alt={server.image.alt}
              class="rounded-full"
              width="50"
            />
            <div>
              <p class="font-semibold text-lg leading-5">{server.name}</p>
              <p class="opacity-60">{server.members} Members</p>
            </div>
          </div>
        </div>
      ))
    }
  </div>
</div>
